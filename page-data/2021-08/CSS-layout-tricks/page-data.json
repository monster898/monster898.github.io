{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-08/CSS-layout-tricks/","result":{"data":{"site":{"siteMetadata":{"title":"好成的blog"}},"markdownRemark":{"id":"38393101-efee-5468-88a0-4ce130afb893","excerpt":"何时会触发 BFC： 根元素（< html >） 浮动元素（元素的 float 不是 none） 绝对定位元素（元素的 position 为 absolute 或 fixed） 行内块元素（元素的 display 为 inline-block） 表格单元格（元素的 display 为 table-cell，HTML…","html":"<p><strong>何时会触发 BFC：</strong></p>\n<ul>\n<li>根元素（&#x3C; html >）</li>\n<li>浮动元素（元素的 float 不是 none）</li>\n<li>绝对定位元素（元素的 position 为 absolute 或 fixed）</li>\n<li>行内块元素（元素的 display 为 inline-block）</li>\n<li>表格单元格（元素的 display 为 table-cell，HTML 表格单元格默认为该值）</li>\n<li>表格标题（元素的 display 为 table-caption，HTML 表格标题默认为该值）</li>\n<li>匿名表格单元格元素（元素的 display 为 table、table-row、 table-row-group、table-header-group、table-footer-group（分别是 HTML table、row、tbody、thead、tfoot 的默认属性）或 inline-table）\r\noverflow 计算值(Computed)不为 visible 的块元素\r\ndisplay 值为 flow-root 的元素\r\ncontain 值为 layout、content 或 paint 的元素</li>\n<li>弹性元素（display 为 flex 或 inline-flex 元素的直接子元素）</li>\n<li>网格元素（display 为 grid 或 inline-grid 元素的直接子元素）</li>\n<li>多列容器（元素的 column-count 或 column-width (en-US) 不为 auto，包括 column-count 为 1）</li>\n<li>column-span 为 all 的元素始终会创建一个新的 BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）。</li>\n</ul>\n<h2>水平和垂直居中技术</h2>\n<ol>\n<li>水平居中 normal flow 中的块级元素</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.block-center {\r\n  display: block;\r\n  width: 30px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n&lt;div class=\"blue\">\r\n  &lt;div class=\"block-center green\">Centered&lt;/div>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49460f9ccf8c69bdcb9ec5b334266cb5/d67ca/t1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.860759493670885%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAABJNAAASTQHzl8SnAAAAR0lEQVQI12NYee4xBnq06vyLRafP9e3vm7nv+IrTj1eex1TzeNmZRwwnHrzFQG9OPvhw5N6DHde37rt2+/i9d9jUvD12/w0AkV9hQ4bUVdkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/49460f9ccf8c69bdcb9ec5b334266cb5/f058b/t1.png\"\n        srcset=\"/static/49460f9ccf8c69bdcb9ec5b334266cb5/c26ae/t1.png 158w,\n/static/49460f9ccf8c69bdcb9ec5b334266cb5/6bdcf/t1.png 315w,\n/static/49460f9ccf8c69bdcb9ec5b334266cb5/f058b/t1.png 630w,\n/static/49460f9ccf8c69bdcb9ec5b334266cb5/d67ca/t1.png 714w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n缺点：必要明确块的宽度才能居中，有时候我们无法把握正确的宽度以至于会发生 overflow 的情况。</p>\n<ol start=\"2\">\n<li>水平居中 line boxes 中的行级元素</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.text-align-center {\r\n  text-align: center;\r\n}\r\n&lt;div class=\"text-align-center blue\">\r\n  &lt;span class=\"green\">Centered&lt;/span>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0cfd8818bbf84823bf0398ac513a674e/d0c0e/t2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.962025316455696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAABJNAAASTQHzl8SnAAAANUlEQVQI12M4cPv1lqvPt117gYSeb7/2etPV22vOzV19bvaGyze3X3u97RqKmq1XX+y79QoAvk8wSorAeegAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/0cfd8818bbf84823bf0398ac513a674e/f058b/t2.png\"\n        srcset=\"/static/0cfd8818bbf84823bf0398ac513a674e/c26ae/t2.png 158w,\n/static/0cfd8818bbf84823bf0398ac513a674e/6bdcf/t2.png 315w,\n/static/0cfd8818bbf84823bf0398ac513a674e/f058b/t2.png 630w,\n/static/0cfd8818bbf84823bf0398ac513a674e/d0c0e/t2.png 715w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n缺点：如果 line box 的高够高，长文本可能会分到几个 line box 中，居中的行为是在分到多行以后才应用的。</p>\n<ol start=\"3\">\n<li>垂直居中行级元素</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.valign-center {\r\n  vertical-align: middle;\r\n  height: 100px;\r\n}\r\n&lt;div class=\"valign-center blue\">\r\n  &lt;span class=\"green\">Centered&lt;/span>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/524e9c331d58159cd5dd8ac76d4fb7f3/6bbf7/t3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAABJNAAASTQHzl8SnAAAAZ0lEQVQI12NYfGbV9MNtc05sWXnhxcrzj1eef0IMWn7u8eYrzxlWn3+86PT9pWcfLT//mHi07Nyj9ZeeMqw492ThmceLTj9aePoh8Wj+qQerzj9hOHD71Y5rz3def0ES2n7t+aE7rwHA6LzJxDozXAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/524e9c331d58159cd5dd8ac76d4fb7f3/f058b/t3.png\"\n        srcset=\"/static/524e9c331d58159cd5dd8ac76d4fb7f3/c26ae/t3.png 158w,\n/static/524e9c331d58159cd5dd8ac76d4fb7f3/6bdcf/t3.png 315w,\n/static/524e9c331d58159cd5dd8ac76d4fb7f3/f058b/t3.png 630w,\n/static/524e9c331d58159cd5dd8ac76d4fb7f3/6bbf7/t3.png 716w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n<strong>为什么不起效果？</strong></p>\n<p>因为这个属性的作用是：讲盒子的中点对准 line box 基线+半个 X 的高度！而上图中 line box 的高度仅为第一行的高度！</p>\n<p><strong>怎么能让他起效果？</strong></p>\n<p>两种方式</p>\n<ul>\n<li>设置 line-height 的高度为父盒子的高度，这个就相当于把 line box 的高度设置为了父盒子的高度。注意：必须设置明确的具体值，line-height：100%不会生效，因为 line height 是相对于父元素的字体高度，而不是父容器的高度。</li>\n<li>通过一个 inline-block 伪元素把 line box 高度撑起来，让他跟父盒子的高度相等。（推荐这个方法）</li>\n</ul>\n<h2>水平和垂直居中</h2>\n<ol>\n<li>position: absolute constraint based centering</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* { box-sizing: border-box; }\r\n.center-container {\r\n  position: relative;\r\n  height: 100px;\r\n  width: 200px;\r\n}\r\n.dialog {\r\n  height: 40%;\r\n  width: 50%;\r\n}\r\n.absolute-center {\r\n  margin: auto;\r\n  position: absolute;\r\n  top: 0; left: 0; bottom: 0; right: 0;\r\n}\r\n&lt;div class=\"center-container blue\">\r\n  &lt;div class=\"dialog absolute-center green\">Centered&lt;/div>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 414px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8949420f2391f8fe28b1700357795802/b910a/t4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJNAAASTQHzl8SnAAABD0lEQVQY032NO0+DUACF+cvGoaOrm49G0Ui5cKkNg1OJ7qU1PC7PGgcjFLhQkEctiam2NRaDGmOj9eSbzsmXQ0RpIdhh18SChbuW/43wBe5a+MoOy6fZcrF4ma+FGCUTSsEMClgUQi2FegaNjNVToD4wKGEQZhBuyf70eVlV1WpV/QzhJQWnYd6KON3d65OH/YN9sdkcHNH2KalxnO7VkxaUm2SIMG+OAbo7lhusvEVJ25zRuAx32NtdWnV4cwzRZrl+NqO2MSINHtyc08NOa9ihTHiiXbR1/79nNy7OJB+oQY0S0/IHSgyUGKjxZ09J3nT2l5w9lgN30rvPRCcXnewXec/Jr91i/vpWy2tu9Q7UUWPsECOuqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/8949420f2391f8fe28b1700357795802/b910a/t4.png\"\n        srcset=\"/static/8949420f2391f8fe28b1700357795802/c26ae/t4.png 158w,\n/static/8949420f2391f8fe28b1700357795802/6bdcf/t4.png 315w,\n/static/8949420f2391f8fe28b1700357795802/b910a/t4.png 414w\"\n        sizes=\"(max-width: 414px) 100vw, 414px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n缺点：必须明确设定元素的宽，高和偏移量的具体值。可以使用 max-width/min-width/max-height/min-height 和百分比绕过这个问题。（IE8+） 2. absolute+缩放</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* { box-sizing: border-box; }\r\n.center-container {\r\n  position: relative;\r\n  height: 100px;\r\n  width: 200px;\r\n}\r\n.absolute-center-negative {\r\n  position: absolute;\r\n  top: 50%; left: 50%;\r\n  width: 100px;\r\n  transform: translateX(-50%);\r\n  transform: translateY(-50%);\r\n  height: 50px;\r\n}\r\n&lt;div class=\"center-container blue\">\r\n  &lt;div class=\"absolute-center-negative green\">Centered&lt;/div>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76d08848b6ee23e6ce68d239d90d5063/e85cb/t5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJNAAASTQHzl8SnAAABEElEQVQY03WNzUuDYACH/Z+7dOjWbRSxGs6POjhtuU7RKSJobEsdfszyg9Khvjpf5qbwOoN12d5oXYLmw3P6wcOPKKsKFiUsyjRHaY7grz8L2o1lUVZf6/0Qb2BBjgL6JaCliJYBo8SUBMhh2B6FjBS0BtNHd44x3my2/yGcJBf0+NbMSPn+fNBoDc9IqdlxKHbCdQ1wrc/6/hJjvMV7IOwk5zVwY2SUynfNA0E77FlHD8lxx21wWsBrybO3qI13z0CczFnjTvRPetML0WuK76es2RaMUNCTvl8fW/Hyahxxanw59tqSRck2Jdu0YjGKy6mAVaKnj6w2zlFlw5UNkQNXDvz8Y+XA8nWGUrSui78BgPxuwPPzaKIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/76d08848b6ee23e6ce68d239d90d5063/e85cb/t5.png\"\n        srcset=\"/static/76d08848b6ee23e6ce68d239d90d5063/c26ae/t5.png 158w,\n/static/76d08848b6ee23e6ce68d239d90d5063/6bdcf/t5.png 315w,\n/static/76d08848b6ee23e6ce68d239d90d5063/e85cb/t5.png 480w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n缺点：必须明确设置元素的宽和高！</p>\n<ol start=\"3\">\n<li>flexbox based centering</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.flexbox-center {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100px;\r\n  width: 200px;\r\n}\r\n&lt;div class=\"flexbox-center blue\">\r\n  &lt;div class=\"green\">Centered&lt;/div>\r\n&lt;/div></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 436px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0e4b97c394352e10105ad10951cb27ca/8574c/t6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJNAAASTQHzl8SnAAABAklEQVQY033PTUvDQBAG4P5eL4L/wJt4UUQkajC1G82mmIBgi+hBKiQ1qfuR1kMPJU12J0mLHwWxUlAaScGLJL48zGHgZZja3TAziLR5YhWkHcCKtDhYPLF5YhI5fV/keb5c5n9Suwyk6kU6FYjEOkkRmSIy0QsSEXFGpfowFm/z8nJrAHU/xlRglind24Ouduyf77votDfELMVM1v0IZp/l5as+aH5s0Nhgzzv3J1s3a9vXG5vtddXjmGUGE5oXyapy+ylpPIpmACYHMwCzD+ZgNXmhGUCjF1devqBitzM6ckPFCRVnrDjRr2Jz6IZ7nVHlz+nsI3yZR6//WXx952X5AWyra1u1QTCqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/0e4b97c394352e10105ad10951cb27ca/8574c/t6.png\"\n        srcset=\"/static/0e4b97c394352e10105ad10951cb27ca/c26ae/t6.png 158w,\n/static/0e4b97c394352e10105ad10951cb27ca/6bdcf/t6.png 315w,\n/static/0e4b97c394352e10105ad10951cb27ca/8574c/t6.png 436w\"\n        sizes=\"(max-width: 436px) 100vw, 436px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n注意：如果有多个 item 要居中，要设置 flex-wrap：nowrap。</p>\n<h3>文档中的层叠上下文由满足以下任意一个条件的元素形成：</h3>\n<ul>\n<li>文档根元素（<html>）；</li>\n<li>position 值为 absolute（绝对定位）或 relative（相对定位）且 z-index 值不为 auto 的元素；</li>\n<li>position 值为 fixed（固定定位）或 sticky（粘滞定位）的元素（沾滞定位适配所有移动设备上的浏览器，但老的桌面浏览器不支持）；</li>\n<li>flex (flexbox (en-US)) 容器的子元素，且 z-index 值不为 auto；</li>\n<li>grid (grid) 容器的子元素，且 z-index 值不为 auto；</li>\n<li>opacity 属性值小于 1 的元素（参见 the specification for opacity）；\r\nmix-blend-mode 属性值不为 normal 的元素；</li>\n<li>以下任意属性值不为 none 的元素：\n<ul>\n<li>transform</li>\n<li>filter</li>\n<li>perspective</li>\n<li>clip-path</li>\n<li>mask / mask-image / mask-border</li>\n</ul>\n</li>\n<li>isolation 属性值为 isolate 的元素；</li>\n<li>-webkit-overflow-scrolling 属性值为 touch 的元素；</li>\n<li>will-change 值设定了任一属性而该属性在 non-initial 值时会创建层叠上下文的元素（参考这篇文章）；</li>\n<li>contain 属性值为 layout、paint 或包含它们其中之一的合成值（比如 contain: strict、contain: content）的元素。</li>\n</ul>","frontmatter":{"title":"CSS tricks","date":"August 20, 2021","description":"学习CSS布局(5)"},"timeToRead":4},"previous":{"fields":{"slug":"/2021-08/CSS3-flexbox/"},"frontmatter":{"title":"CSS3:Flexbox"}},"next":{"fields":{"slug":"/2021-08/HTTP-cache/"},"frontmatter":{"title":"谈谈HTTP缓存"}}},"pageContext":{"id":"38393101-efee-5468-88a0-4ce130afb893","previousPostId":"b5020d1d-a4f6-5f80-9952-4f4bdffd94ea","nextPostId":"d97f59bd-1b72-5094-a7fe-1dc8b13b04b4"}},"staticQueryHashes":["2841359383","3415673938"]}